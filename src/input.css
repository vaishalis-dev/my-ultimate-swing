@config "../tailwind.config.js";
@import "tailwindcss";

body {
 margin: 0;
 padding: 0;
 overflow: hidden; /* page itself doesn't scroll */
}

#main-scroll-container {
 /* 100dvh = visible viewport on mobile (excludes address bar); 100vh fallback for older browsers */
 height: 100vh;
 height: 100dvh;
 overflow-y: auto; /* MUST be scrollable */
 scroll-behavior: auto; /* GSAP controls movement */
 /* Hide scrollbar */
 scrollbar-width: none;
 /* Firefox */
 -ms-overflow-style: none;
 /* IE & Edge */
}

#main-scroll-container::-webkit-scrollbar {
 display: none;
 /* Chrome, Safari */
}

.right-scroll-container {
 height: 100vh;
 height: 100dvh; /* matches visible viewport on mobile */
 overflow-y: auto; /* MUST scroll */
 /* Hide scrollbar */
 scrollbar-width: none;
 /* Firefox */
 -ms-overflow-style: none;
 /* IE & Edge */
}

.right-scroll-container::-webkit-scrollbar {
 display: none;
 /* Chrome, Safari */
}

/* Text items styling */
.text-item {
 grid-area: 1 / 1;
 opacity: 0;
 transform: translateY(40px) scale(0.9);
 filter: blur(6px);
 pointer-events: none;

 transition:
  opacity 1.2s cubic-bezier(0.25, 0.8, 0.25, 1),
  transform 1.2s cubic-bezier(0.25, 0.8, 0.25, 1),
  filter 1.2s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* ACTIVE (CENTER / HERO) */
.text-item.active {
 opacity: 1;
 transform: translateY(0) scale(1);
 filter: blur(0);
 pointer-events: auto;
}

/* PREVIOUS (GOING UP & AWAY) */
.text-item.prev {
 opacity: 0;
 transform: translateY(-50px) scale(0.88);
 filter: blur(8px);
}

/* NEXT (WAITING BELOW – invisible but positioned) */
.text-item.next {
 opacity: 0;
 transform: translateY(60px) scale(0.88);
 filter: blur(8px);
}

/* Image items styling */
.step-image {
 width: clamp(260px, 28vw, 460px);
 max-width: 100%;
 aspect-ratio: 16 / 10;
 position: relative;
 z-index: 2;
 background: linear-gradient(to bottom, #1c1b33, #2e335a);
 border-radius: 1rem;
 opacity: 0.35;
 transition:
  opacity 0.6s ease,
  transform 0.6s cubic-bezier(0.22, 1, 0.36, 1),
  border-color 0.6s ease,
  box-shadow 0.6s ease;
}

.step-image.active {
 width: clamp(300px, 32vw, 460px);
 opacity: 1;
 transform: scale(1.1);
 z-index: 5;
 box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
}

.step-image.prev,
.step-image.next {
 transform: scale(0.96);
 z-index: 2;
}

/* Active state: white borders on image and panel */
.step-image > div {
 transition: border-color 0.6s ease;
}
.step-image.active > div {
 border-color: white;
}

.icon-shadow {
 box-shadow:
  inset 1px 1px 0 rgba(174, 134, 226, 0.16),
  -10px -10px 22px rgba(201, 120, 255, 0.25),
  10px 10px 26px rgba(0, 0, 0, 0.45);
}

/* Black footer bar: sticky to viewport bottom on scroll so it stays visible on tall phones (e.g. iPhone XR, 12); safe area for home indicator */
.footer-legal-bar {
 position: sticky;
 bottom: 0;
 z-index: 20;
 padding-bottom: 0.5rem;
 padding-bottom: env(safe-area-inset-bottom);
}

/* Top blur (frosted glass) only on mobile */
@media (max-width: 1024px) {
 .left-side-container {
  height: fit-content;
  z-index: 10;

  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  /* TOP blur only */
  -webkit-mask-image: linear-gradient(to bottom, black 0%, black 25%, transparent 65%, transparent 100%);
  mask-image: linear-gradient(to bottom, black 0%, black 25%, transparent 65%, transparent 100%);

  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
 }
}

/* Section 3: Key Features + Footer – content adapts, footer never shrinks, responsive gap */
.key-features-content {
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.key-features-content::-webkit-scrollbar {
  display: none;
}
.footer-key-features {
  flex-shrink: 0;
  min-height: fit-content;
}

/* Taller mobile/tablet (iPad, iPhone XR): tighten gap below cards; extend purple footer; expand cards with vertical padding */
@media (max-width: 1024px) {
  .key-features-section {
    row-gap: clamp(0.5rem, 1.5vh, 1rem);
  }
  .key-features-content {
    padding-bottom: clamp(0.5rem, 1.5vh, 1rem);
  }
  .key-features-content .grid > div {
    padding-top: clamp(0.5rem, 2vh, 0.875rem);
    padding-bottom: clamp(0.5rem, 2vh, 0.875rem);
  }
  .footer-key-features {
    row-gap: clamp(0.75rem, 2.5vh, 1.5rem);
  }
  .footer-cta-bar {
    padding-bottom: clamp(0.25rem, 1vh, 0.5rem);
  }
  .footer-cta-inner {
    padding-top: clamp(0.5rem, 1.75vh, 0.875rem);
    padding-bottom: clamp(0.375rem, 1.25vh, 0.625rem);
  }
}

/* Small phones (e.g. iPhone SE): reduce purple footer padding so buttons don’t clip */
@media (max-width: 420px) {
  .footer-cta-bar {
    padding-bottom: 0.25rem;
  }
  .footer-cta-inner {
    padding-top: 0.5rem;
    padding-bottom: 0.375rem;
  }
}

/* Desktop/laptop: cap section height + smaller typography so content fits, no clipping */
@media (min-width: 1024px) {
  .key-features-section {
    height: 100dvh;
    max-height: 100dvh;
    min-height: 100dvh;
  }
  .key-features-heading {
    font-size: 1.5rem !important; /* 24px */
  }
  .key-features-intro {
    font-size: 0.875rem !important; /* 14px */
    line-height: 1.45;
  }
  .key-features-card-title {
    font-size: 0.875rem !important; /* 14px */
  }
  .key-features-card-desc {
    font-size: 0.8125rem !important; /* 13px */
    line-height: 1.35;
  }
}

/* Key Features: responsive typography and spacing for phones so content fits above footer */
@media (max-width: 640px) {
 .key-features-content {
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
  gap: 0.5rem;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
 }
 .key-features-content > div:first-child {
  gap: 0.25rem;
 }
 .key-features-heading {
  font-size: clamp(16px, 4.5vw, 20px) !important;
 }
 .key-features-intro {
  font-size: clamp(11px, 2.5vw, 14px) !important;
  line-height: 1.4;
 }
 .key-features-content .grid {
  gap: 0.375rem;
 }
 .key-features-content .grid > div {
  padding-top: clamp(0.5rem, 1.75vh, 0.75rem) !important;
  padding-bottom: clamp(0.5rem, 1.75vh, 0.75rem) !important;
  padding-left: 0.5rem !important;
  padding-right: 0.5rem !important;
 }
 .key-features-content .grid img {
  width: 1.5rem;
  height: 1.5rem;
  margin-bottom: 0.25rem;
 }
 .key-features-card-title {
  font-size: clamp(10px, 2.5vw, 14px) !important;
  margin-bottom: 0.125rem !important;
 }
 .key-features-card-desc {
  font-size: clamp(9px, 2vw, 12px) !important;
  line-height: 1.3;
 }
}

/* Touch: disable native scroll so only Observer + GSAP drive section-to-section scroll */
@media (pointer: coarse) {
 #main-scroll-container,
 .right-scroll-container {
  touch-action: none;
 }
}